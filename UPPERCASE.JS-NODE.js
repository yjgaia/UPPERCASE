global.NODE_CONFIG=NODE_CONFIG={},global.CPU_CLUSTERING=CPU_CLUSTERING=METHOD(function(E){"use strict";var o,n,t=require("cluster");return E.getWorkerId=n=function(){return o},{run:function(n){RUN(t.isMaster?function(){var E=function(){var E=t.fork();E.on("message",function(o){EACH(t.workers,function(n){n!==E&&n.send(o)})})};REPEAT(require("os").cpus().length,function(){E()}),t.on("exit",function(o,n,t){console.log(CONSOLE_RED("[UPPERCASE.JS-CPU_CLUSTERING] WORKER #"+o.id+" died. ("+(void 0!==t?t:n)+"). restarting...")),E()})}:function(){var e,i,r,S={},R=function(E,o){var n=S[E];void 0!==n&&EACH(n,function(E){E(o)})};o=t.worker.id,process.on("message",function(E){var o=PARSE_STR(E);void 0!==o&&R(o.methodName,o.data)}),E.on=e=function(E,o){var n=S[E];void 0===n&&(n=S[E]=[]),n.push(o)},e("__SHARED_STORE_SAVE",SHARED_STORE.save),e("__SHARED_STORE_REMOVE",SHARED_STORE.remove),e("__CPU_SHARED_STORE_SAVE",CPU_SHARED_STORE.save),e("__CPU_SHARED_STORE_REMOVE",CPU_SHARED_STORE.remove),E.off=i=function(E){delete S[E]},E.broadcast=r=function(E){process.send(STRINGIFY(E))},n(),console.log(CONSOLE_GREEN("[UPPERCASE.JS-CPU_CLUSTERING] RUNNING WORKER... (ID:"+o+")"))})}}}),global.CPU_SHARED_STORE=CPU_SHARED_STORE=CLASS(function(E){"use strict";var o,n,t,e={},i={};return E.save=o=function(E,o){var n=E.fullName,t=E.value,r=E.removeAfterSeconds,S=E.isWaitingRemove;e[n]=t,S===!0&&void 0!==i[n]&&(i[n].remove(),delete i[n]),void 0!==r&&(i[n]=DELAY(r,o))},E.get=n=function(E){return e[E]},E.remove=t=function(E){delete e[E],void 0!==i[E]&&(i[E].remove(),delete i[E])},{init:function(o,n,t){var e,i,r,S;o.getFullName=e=function(E){return t+"."+E},n.save=i=function(o){var n=o.name,t=e(n),i=o.value,r=o.removeAfterSeconds;E.save({fullName:t,value:i,removeAfterSeconds:r},function(){S(n)}),void 0!==CPU_CLUSTERING.broadcast&&CPU_CLUSTERING.broadcast({methodName:"__CPU_SHARED_STORE_SAVE",data:{fullName:t,value:i,isWaitingRemove:void 0!==r}})},n.get=r=function(o){return E.get(e(o))},n.remove=S=function(o){var n=e(o);E.remove(n),void 0!==CPU_CLUSTERING.broadcast&&CPU_CLUSTERING.broadcast({methodName:"__CPU_SHARED_STORE_REMOVE",data:n})}}}}),global.SERVER_CLUSTERING=SERVER_CLUSTERING=METHOD(function(E){"use strict";return{run:function(o,n){var t,e,i,r,S=o.servers,R=o.thisServerName,a=o.port,c={},s={},_={},u=[];t=function(E){s[E]!==!0&&(s[E]=!0,CONNECT_TO_SOCKET_SERVER({host:S[E],port:a},{error:function(){delete s[E]},success:function(o,n,t){t({methodName:"__BOOTED",data:R}),_[E]=function(E){var o=E.methodName,n=E.data;t({methodName:"SERVER_CLUSTERING."+o,data:n})},o("__DISCONNECTED",function(){delete _[E],delete s[E]}),console.log("[UPPERCASE.JS-SERVER_CLUSTERING] CONNECTED CLUSTERING SERVER. (SERVER NAME:"+E+")"),void 0!==CPU_CLUSTERING.broadcast&&CPU_CLUSTERING.broadcast({methodName:"__SERVER_CLUSTERING__CONNECT_TO_CLUSTERING_SERVER",data:E})}}))},void 0!==CPU_CLUSTERING.on&&CPU_CLUSTERING.on("__SERVER_CLUSTERING__CONNECT_TO_CLUSTERING_SERVER",t),EACH(S,function(E,o){o!==R&&t(o)}),SOCKET_SERVER(a,function(E,o){u.push(o),o("__BOOTED",function(E){t(E)}),EACH(c,function(E,n){EACH(E,function(E){o("SERVER_CLUSTERING."+n,E)})}),o("__DISCONNECTED",function(){REMOVE({array:u,value:o})})}),E.on=e=function(E,o){var n=c[E];void 0===n&&(n=c[E]=[]),n.push(o),EACH(u,function(n){n("SERVER_CLUSTERING."+E,o)})},e("__SHARED_STORE_SAVE",function(E){SHARED_STORE.save(E),void 0!==CPU_CLUSTERING.broadcast&&CPU_CLUSTERING.broadcast({methodName:"__SHARED_STORE_SAVE",data:E})}),e("__SHARED_STORE_REMOVE",function(E){SHARED_STORE.remove(E),void 0!==CPU_CLUSTERING.broadcast&&CPU_CLUSTERING.broadcast({methodName:"__SHARED_STORE_REMOVE",data:E})}),E.off=i=function(E){delete c[E]},E.broadcast=r=function(E){EACH(_,function(o){o(E)})},void 0!==n&&n(),console.log(CONSOLE_BLUE("[UPPERCASE.JS-SERVER_CLUSTERING] RUNNING CLUSTERING SERVER... (THIS SERVER NAME:"+R+", PORT:"+a+")"))}}}),global.SHARED_STORE=SHARED_STORE=CLASS(function(E){"use strict";var o,n,t,e={},i={};return E.save=o=function(E,o){var n=E.fullName,t=E.value,r=E.removeAfterSeconds,S=E.isWaitingRemove;e[n]=t,S===!0&&void 0!==i[n]&&(i[n].remove(),delete i[n]),void 0!==r&&(i[n]=DELAY(r,o))},E.get=n=function(E){return e[E]},E.remove=t=function(E){delete e[E],void 0!==i[E]&&(i[E].remove(),delete i[E])},{init:function(o,n,t){var e,i,r,S;e=function(E){return t+"."+E},n.save=i=function(o){var n=o.name,t=e(n),i=o.value,r=o.removeAfterSeconds;E.save({fullName:t,value:i,removeAfterSeconds:r},function(){S(n)}),void 0!==CPU_CLUSTERING.broadcast&&CPU_CLUSTERING.broadcast({methodName:"__SHARED_STORE_SAVE",data:{fullName:t,value:i,isWaitingRemove:void 0!==r}}),void 0!==SERVER_CLUSTERING.broadcast&&SERVER_CLUSTERING.broadcast({methodName:"__SHARED_STORE_SAVE",data:{fullName:t,value:i,isWaitingRemove:void 0!==r}})},n.get=r=function(o){return E.get(e(o))},n.remove=S=function(o){var n=e(o);E.remove(n),void 0!==CPU_CLUSTERING.broadcast&&CPU_CLUSTERING.broadcast({methodName:"__SHARED_STORE_REMOVE",data:n}),void 0!==SERVER_CLUSTERING.broadcast&&SERVER_CLUSTERING.broadcast({methodName:"__SHARED_STORE_REMOVE",data:n})}}}}),global.CONNECT_TO_SOCKET_SERVER=CONNECT_TO_SOCKET_SERVER=METHOD({run:function(E,o){"use strict";var n,t,e,i,r,S,R,a,c,s=E.host,_=E.port,u=require("net"),C={},d=0,O="";CHECK_IS_DATA(o)!==!0?n=o:(n=o.success,t=o.error),c=function(E,o,n){var t=C[E];void 0!==t&&EACH(t,function(E){E(o,function(E){void 0!==a&&void 0!==n&&a({methodName:"__CALLBACK_"+n,data:E})})})},e=u.connect({host:s,port:_},function(){i=!0,n(S=function(E,o){var n=C[E];void 0===n&&(n=C[E]=[]),n.push(o)},R=function(E,o){var n=C[E];void 0!==n&&(void 0!==o?REMOVE({array:n,value:o}):delete C[E])},a=function(E,o){var n="__CALLBACK_"+d;E.sendKey=d,d+=1,e.write(STRINGIFY(E)+"\r\n"),void 0!==o&&S(n,function(E){o(E),R(n)})},function(){r=!0,e.end()})}),e.on("data",function(E){var o,n,t;for(O+=E.toString();-1!==(n=O.indexOf("\r\n"));)o=O.substring(0,n),t=PARSE_STR(o),void 0!==t&&c(t.methodName,t.data,t.sendKey),O=O.substring(n+1)}),e.on("close",function(){r!==!0&&c("__DISCONNECTED")}),e.on("error",function(E){var o=E.toString();i!==!0?void 0!==t?t(o):console.log(CONSOLE_RED("[UPPERCASE.JS-CONNECT_TO_SOCKET_SERVER] CONNECT TO SOCKET SERVER FAILED: "+o)):c("__ERROR",o)})}}),global.CONSOLE_BLUE=CONSOLE_BLUE=METHOD({run:function(E){"use strict";return"[36m"+E+"[0m"}}),global.CONSOLE_GREEN=CONSOLE_GREEN=METHOD({run:function(E){"use strict";return"[32m"+E+"[0m"}}),global.CONSOLE_RED=CONSOLE_RED=METHOD({run:function(E){"use strict";return"[31m"+E+"[0m"}}),global.CONSOLE_YELLOW=CONSOLE_YELLOW=METHOD({run:function(E){"use strict";return"[33m"+E+"[0m"}}),global.SHA1=SHA1=METHOD({run:function(E){"use strict";var o=E.key,n=E.password,t=require("crypto");return t.createHmac("sha1",o).update(n).digest("hex")}}),global.CHECK_IS_EXISTS_FILE=CHECK_IS_EXISTS_FILE=METHOD(function(){"use strict";var E=require("fs");return{run:function(o,n){var t,e;return CHECK_IS_DATA(o)!==!0?t=o:(t=o.path,e=o.isSync),e===!0?E.existsSync(t):void E.exists(t,n)}}}),global.COPY_FILE=COPY_FILE=METHOD(function(){"use strict";var E=require("fs"),o=require("path");return{run:function(n,t){var e,i,r,S=n.from,R=n.to,a=n.isSync;void 0!==t&&(CHECK_IS_DATA(t)!==!0?e=t:(e=t.success,i=t.notExists,r=t.error)),CREATE_FOLDER({path:o.dirname(R),isSync:a},{error:r,success:function(){a!==!0?CHECK_IS_EXISTS_FILE(S,function(o){var n;o===!0?(n=E.createReadStream(S),n.pipe(E.createWriteStream(R)),n.on("error",function(E){var o=E.toString();void 0!==r?r(o):console.log(CONSOLE_RED("[UPPERCASE.JS-COPY_FILE] ERROR:"+o))}),n.on("end",function(){void 0!==e&&e()})):void 0!==i?i(S):console.log(CONSOLE_YELLOW("[UPPERCASE.JS-COPY_FILE] NOT EXISTS! <"+S+">"))}):RUN(function(){var o;try{if(CHECK_IS_EXISTS_FILE({path:S,isSync:!0})!==!0)return void(void 0!==i?i(S):console.log(CONSOLE_YELLOW("[UPPERCASE.JS-COPY_FILE] NOT EXISTS! <"+S+">")));E.writeFileSync(R,E.readFileSync(S))}catch(n){n!==TO_DELETE&&(o=n.toString(),void 0!==r?r(o):console.log(CONSOLE_RED("[UPPERCASE.JS-COPY_FILE] ERROR: "+o)))}void 0!==e&&e()})}})}}}),global.CREATE_FOLDER=CREATE_FOLDER=METHOD(function(){"use strict";var E=require("fs"),o=require("path");return{run:function(n,t){var e,i,r,S,R;CHECK_IS_DATA(n)!==!0?e=n:(e=n.path,i=n.isSync),void 0!==t&&(CHECK_IS_DATA(t)!==!0?S=t:(S=t.success,R=t.error)),i!==!0?CHECK_IS_EXISTS_FILE(e,function(n){n===!0?void 0!==S&&S():(r=o.dirname(e),CHECK_IS_EXISTS_FILE(r,function(o){o===!0?E.mkdir(e,function(E){var o;E!==TO_DELETE?(o=E.toString(),void 0!==R?R(o):console.log(CONSOLE_RED("[UPPERCASE.JS-CREATE_FOLDER] ERROR: "+o))):S()}):CREATE_FOLDER(r,function(){CREATE_FOLDER(e,S)})}))}):RUN(function(){var n;try{CHECK_IS_EXISTS_FILE({path:e,isSync:!0})!==!0&&(r=o.dirname(e),CHECK_IS_EXISTS_FILE({path:r,isSync:!0})===!0?E.mkdirSync(e):(CREATE_FOLDER({path:r,isSync:!0}),CREATE_FOLDER({path:e,isSync:!0})))}catch(t){t!==TO_DELETE&&(n=t.toString(),void 0!==R?R(n):console.log(CONSOLE_RED("[UPPERCASE.JS-CREATE_FOLDER] ERROR: "+n)))}void 0!==S&&S()})}}}),global.FIND_FILE_NAMES=FIND_FILE_NAMES=METHOD(function(){"use strict";{var E=require("fs");require("path")}return{run:function(o,n){var t,e,i,r,S,R=[];return CHECK_IS_DATA(o)!==!0?t=o:(t=o.path,e=o.isSync),void 0!==n&&(CHECK_IS_DATA(n)!==!0?i=n:(i=n.success,r=n.notExists,S=n.error)),e===!0?RUN(function(){var o,n;try{if(CHECK_IS_EXISTS_FILE({path:t,isSync:!0})!==!0)return void(void 0!==r?r(t):console.log(CONSOLE_YELLOW("[UPPERCASE.JS-FIND_FILE_NAMES] NOT EXISTS! <"+t+">")));o=E.readdirSync(t),EACH(o,function(o){"."!==o[0]&&E.statSync(t+"/"+o).isDirectory()!==!0&&R.push(o)})}catch(e){e!==TO_DELETE&&(n=e.toString(),void 0!==S?S(n):console.log(CONSOLE_RED("[UPPERCASE.JS-FIND_FILE_NAMES] ERROR: "+n)))}return void 0!==i&&i(R),R}):void CHECK_IS_EXISTS_FILE(t,function(o){o===!0?E.readdir(t,function(o,n){var e;o!==TO_DELETE?(e=o.toString(),void 0!==S?S(e):console.log(CONSOLE_RED("[UPPERCASE.JS-FIND_FILE_NAMES] ERROR:"+e))):void 0!==i&&PARALLEL(n,[function(o,n){"."!==o[0]?E.stat(t+"/"+o,function(E,t){var e;E!==TO_DELETE?(e=E.toString(),void 0!==S?S(e):console.log(CONSOLE_RED("[UPPERCASE.JS-FIND_FILE_NAMES] ERROR:"+e))):(t.isDirectory()!==!0&&R.push(o),n())}):n()},function(){void 0!==i&&i(R)}])}):void 0!==r?r(t):console.log(CONSOLE_YELLOW("[UPPERCASE.JS-FIND_FOLDER_NAMES] NOT EXISTS! <"+t+">"))})}}}),global.FIND_FOLDER_NAMES=FIND_FOLDER_NAMES=METHOD(function(){"use strict";{var E=require("fs");require("path")}return{run:function(o,n){var t,e,i,r,S,R=[];return CHECK_IS_DATA(o)!==!0?t=o:(t=o.path,e=o.isSync),void 0!==n&&(CHECK_IS_DATA(n)!==!0?i=n:(i=n.success,r=n.notExists,S=n.error)),e===!0?RUN(function(){var o,n;try{if(CHECK_IS_EXISTS_FILE({path:t,isSync:!0})!==!0)return void(void 0!==r?r(t):console.log(CONSOLE_YELLOW("[UPPERCASE.JS-FIND_FOLDER_NAMES] NOT EXISTS! <"+t+">")));o=E.readdirSync(t),EACH(o,function(o){"."!==o[0]&&E.statSync(t+"/"+o).isDirectory()===!0&&R.push(o)})}catch(e){e!==TO_DELETE&&(n=e.toString(),void 0!==S?S(n):console.log(CONSOLE_RED("[UPPERCASE.JS-FIND_FOLDER_NAMES] ERROR: "+n)))}return void 0!==i&&i(R),R}):void CHECK_IS_EXISTS_FILE(t,function(o){o===!0?E.readdir(t,function(o,n){var e;o!==TO_DELETE?(e=o.toString(),void 0!==S?S(e):console.log(CONSOLE_RED("[UPPERCASE.JS-FIND_FOLDER_NAMES] ERROR:"+e))):void 0!==i&&PARALLEL(n,[function(o,n){"."!==o[0]?E.stat(t+"/"+o,function(E,t){var e;E!==TO_DELETE?(e=E.toString(),void 0!==S?S(e):console.log(CONSOLE_RED("[UPPERCASE.JS-FIND_FOLDER_NAMES] ERROR:"+e))):(t.isDirectory()===!0&&R.push(o),n())}):n()},function(){void 0!==i&&i(R)}])}):void 0!==r?r(t):console.log(CONSOLE_YELLOW("[UPPERCASE.JS-FIND_FOLDER_NAMES] NOT EXISTS! <"+t+">"))})}}}),global.MOVE_FILE=MOVE_FILE=METHOD({run:function(E,o){"use strict";var n,t,e,i=E.from,r=E.isSync;CHECK_IS_DATA(o)!==!0?n=o:(n=o.success,t=o.notExists,e=o.error),COPY_FILE(E,{error:e,notExists:t,success:function(){REMOVE_FILE({path:i,isSync:r},{error:e,notExists:t,success:n})}})}}),global.READ_FILE=READ_FILE=METHOD(function(){"use strict";var E=require("fs");return{run:function(o,n){var t,e,i,r,S;return CHECK_IS_DATA(o)!==!0?t=o:(t=o.path,e=o.isSync),void 0!==n&&(CHECK_IS_DATA(n)!==!0?i=n:(i=n.success,r=n.notExists,S=n.error)),e===!0?RUN(function(){var o,n;try{if(CHECK_IS_EXISTS_FILE({path:t,isSync:!0})!==!0)return void(void 0!==r?r(t):console.log(CONSOLE_YELLOW("[UPPERCASE.JS-READ_FILE] NOT EXISTS! <"+t+">")));if(E.statSync(t).isDirectory()===!0)return void(void 0!==r?r(t):console.log(CONSOLE_YELLOW("[UPPERCASE.JS-READ_FILE] NOT EXISTS! <"+t+">")))}catch(e){e!==TO_DELETE&&(o=e.toString(),void 0!==S?S(o):console.log(CONSOLE_RED("[UPPERCASE.JS-READ_FILE] ERROR: "+o)))}return n=E.readFileSync(t),void 0!==i&&i(n),n}):void CHECK_IS_EXISTS_FILE(t,function(o){o===!0?E.stat(t,function(o,n){var e;o!==TO_DELETE?(e=o.toString(),void 0!==S?S(e):console.log(CONSOLE_RED("[UPPERCASE.JS-READ_FILE] ERROR: "+e))):n.isDirectory()===!0?void 0!==r?r(t):console.log(CONSOLE_YELLOW("[UPPERCASE.JS-READ_FILE] NOT EXISTS! <"+t+">")):E.readFile(t,function(E,o){var n;E!==TO_DELETE?(n=E.toString(),void 0!==S?S(n):console.log(CONSOLE_RED("[UPPERCASE.JS-READ_FILE] ERROR: "+n))):void 0!==i&&i(o)})}):void 0!==r?r(t):console.log(CONSOLE_YELLOW("[UPPERCASE.JS-READ_FILE] NOT EXISTS! <"+t+">"))})}}}),global.REMOVE_FILE=REMOVE_FILE=METHOD(function(){"use strict";var E=require("fs");return{run:function(o,n){var t,e,i,r,S;CHECK_IS_DATA(o)!==!0?t=o:(t=o.path,e=o.isSync),CHECK_IS_DATA(n)!==!0?i=n:(i=n.success,r=n.notExists,S=n.error),e!==!0?CHECK_IS_EXISTS_FILE(t,function(o){o===!0?E.unlink(t,function(E){var o;E!==TO_DELETE?(o=E.toString(),void 0!==S?S(o):console.log(CONSOLE_RED("[UPPERCASE.JS-REMOVE_FILE] ERROR: "+o))):void 0!==i&&i()}):void 0!==r?r(t):console.log(CONSOLE_YELLOW("[UPPERCASE.JS-REMOVE_FILE] NOT EXISTS! <"+t+">"))}):RUN(function(){var o;try{if(CHECK_IS_EXISTS_FILE({path:t,isSync:!0})!==!0)return void(void 0!==r?r(t):console.log(CONSOLE_YELLOW("[UPPERCASE.JS-REMOVE_FILE] NOT EXISTS! <"+t+">")));E.unlinkSync(t)}catch(n){n!==TO_DELETE&&(o=n.toString(),void 0!==S?S(o):console.log(CONSOLE_RED("[UPPERCASE.JS-REMOVE_FILE] ERROR: "+o)))}void 0!==i&&i()})}}}),global.WRITE_FILE=WRITE_FILE=METHOD(function(){"use strict";var E=require("fs"),o=require("path");return{run:function(n,t){var e,i,r=n.path,S=n.content,R=n.buffer,a=n.isSync;void 0!==t&&(CHECK_IS_DATA(t)!==!0?e=t:(e=t.success,i=t.error)),CREATE_FOLDER({path:o.dirname(r),isSync:a},function(){a!==!0?E.writeFile(r,void 0!==R?R:S,function(E){var o;E!==TO_DELETE?(o=E.toString(),void 0!==i?i(o):console.log(CONSOLE_RED("[UPPERCASE.JS-WRITE_FILE] ERROR:"+o))):void 0!==e&&e()}):RUN(function(){var o;try{E.writeFileSync(r,void 0!==R?R:S)}catch(n){n!==TO_DELETE&&(o=n.toString(),void 0!==i?i(o):console.log(CONSOLE_RED("[UPPERCASE.JS-WRITE_FILE] ERROR: "+o)))}void 0!==e&&e()})})}}}),global.DELETE=DELETE=METHOD({run:function(E,o){"use strict";REQUEST(COMBINE([CHECK_IS_DATA(E)===!0?E:{uri:E},{method:"DELETE"}]),o)}}),global.GET=GET=METHOD({run:function(E,o){"use strict";REQUEST(COMBINE([CHECK_IS_DATA(E)===!0?E:{uri:E},{method:"GET"}]),o)}}),global.POST=POST=METHOD({run:function(E,o){"use strict";REQUEST(COMBINE([CHECK_IS_DATA(E)===!0?E:{uri:E},{method:"POST"}]),o)}}),global.PUT=PUT=METHOD({run:function(E,o){"use strict";REQUEST(COMBINE([CHECK_IS_DATA(E)===!0?E:{uri:E},{method:"PUT"}]),o)}}),global.REQUEST=REQUEST=METHOD(function(){"use strict";var E=require("http"),o=require("https");return{run:function(n,t){var e,i,r,S=n.host,R=n.isSecure,a=void 0===n.port?R!==!0?80:443:n.port,c=n.method,s=n.uri,_=n.paramStr,u=n.data;c=c.toUpperCase(),void 0!==s&&-1!==s.indexOf("?")&&(_=s.substring(s.indexOf("?")+1)+(void 0===_?"":"&"+_),s=s.substring(0,s.indexOf("?"))),void 0!==u&&(_=(void 0===_?"":_+"&")+"data="+encodeURIComponent(STRINGIFY(u))),_=(void 0===_?"":_+"&")+Date.now(),CHECK_IS_DATA(t)!==!0?e=t:(e=t.success,i=t.error),"GET"===c?r=(R!==!0?E:o).get({hostname:S,port:a,path:"/"+(void 0===s?"":s)+"?"+_},function(E){E.setEncoding("utf-8"),E.on("data",function(o){e(o,E.headers)})}):(r=(R!==!0?E:o).request({hostname:S,port:a,path:"/"+(void 0===s?"":s),method:c},function(E){E.setEncoding("utf-8"),E.on("data",function(o){e(o,E.headers)})}),r.write(_),r.end()),r.on("error",function(E){var o=E.toString();void 0!==i?i(o):console.log(CONSOLE_RED("[UPPERCASE.JS-NODE] REQUEST FAILED: "+o),n)})}}}),global.RESOURCE_SERVER=RESOURCE_SERVER=CLASS(function(E){"use strict";var o,n=require("path"),t=require("querystring");return E.getContentTypeFromURI=o=function(E){var o=n.extname(E);return".png"===o?"image/png":".jpeg"===o||".jpg"===o?"image/jpeg":".gif"===o?"image/gif":".svg"===o?"image/svg+xml":".js"===o?"application/javascript":".json"===o?"application/json":".css"===o?"text/css":".text"===o||".txt"===o?"text/plain":".html"===o?"text/html":".swf"===o?"application/x-shockwave-flash":".mp3"===o?"audio/mpeg":"application/octet-stream"},{init:function(E,n,e,i){var r,S,R,a,c,s,_,u,C,d=(require("path"),{});CHECK_IS_DATA(e)!==!0?r=e:(r=e.port,S=e.securedPort,R=e.rootPath,a=e.version),void 0!==i&&(CHECK_IS_DATA(i)!==!0?c=i:(c=i.requestListener,s=i.error,_=i.notExistsResource)),u=WEB_SERVER(e,function(E,n,e){var i,r,S,u=R,C=E.uri,O=E.uri,v=E.method,T=E.params,f=E.headers,N={};NEXT([function(o){void 0!==c&&(i=c(E,n,e,function(E){u=E},function(E){void 0!==E&&(N=E),DELAY(o)}),O=E.uri,v=E.method,T=E.params,f=E.headers),i!==!1&&E.isResponsed!==!0&&o()},function(){return function(){CONFIG.isDevMode!==!0&&(N.isFinal!==!0?void 0!==a&&f["if-none-match"]===a:void 0!==f["if-none-match"])?n(EXTEND({origin:{statusCode:304},extend:N})):CONFIG.isDevMode!==!0&&N.isFinal!==!0&&void 0!==a&&""!==C&&T.version!==a?n(EXTEND({origin:{statusCode:302,headers:{Location:"/"+C+"?"+t.stringify(COMBINE([T,{version:a}]))}},extend:N})):void 0!==u&&"GET"===v?(r=function(o){void 0!==_&&_(o,E,n),E.isResponsed!==!0&&n(EXTEND({origin:{statusCode:404},extend:N}))},S=function(o){void 0!==s?s(o,E,n):console.log(CONSOLE_RED("[UPPERCASE.JS-RESOURCE_SERVER] ERROR: "+o)),E.isResponsed!==!0&&n(EXTEND({origin:{statusCode:500},extend:N}))},NEXT([function(E){var o=d[C];void 0!==o?E(o.buffer,o.contentType):READ_FILE(u+"/"+O,{notExists:function(){READ_FILE(u+(""===O?"":"/"+O)+"/index.html",{notExists:r,error:S,success:function(o){E(o,"text/html")}})},error:S,success:E})},function(){return function(E,t){void 0===t&&(t=o(O)),CONFIG.isDevMode!==!0&&N.isFinal!==!0&&void 0===d[C]&&(d[C]={buffer:E,contentType:t}),n(EXTEND({origin:{buffer:E,contentType:t,version:a},extend:N}))}}])):n(EXTEND({origin:{statusCode:404},extend:N}))}}])}),console.log("[UPPERCASE.JS-RESOURCE_SERVER] RUNNING RESOURCE SERVER..."+(void 0===r?"":" (PORT:"+r+")")+(void 0===S?"":" (SECURED PORT:"+S+")")),n.getNativeHTTPServer=C=function(){return u.getNativeHTTPServer()}}}}),global.SOCKET_SERVER=SOCKET_SERVER=METHOD({run:function(E,o){"use strict";var n=require("net"),t=n.createServer(function(E){var n,t,e,i,r={},S=0,R="",a=function(E,o,n){var t=r[E];void 0!==t&&EACH(t,function(E){E(o,function(E){void 0!==n&&i({methodName:"__CALLBACK_"+n,data:E})})})};E.on("data",function(E){var o,n,t;for(R+=E.toString();-1!==(n=R.indexOf("\r\n"));)o=R.substring(0,n),t=PARSE_STR(o),void 0!==t&&a(t.methodName,t.data,t.sendKey),R=R.substring(n+1)}),E.on("close",function(){n!==!0&&a("__DISCONNECTED"),r=void 0}),E.on("error",function(E){var o=E.toString();console.log("[UPPERCASE.JS-SOCEKT_SERVER] ERROR:",o),a("__ERROR",o)}),o({ip:E.remoteAddress},t=function(E,o){var n=r[E];void 0===n&&(n=r[E]=[]),n.push(o)},e=function(E,o){var n=r[E];void 0!==n&&(void 0!==o?REMOVE({array:n,value:o}):delete r[E])},i=function(o,n){var i="__CALLBACK_"+S;o.sendKey=S,S+=1,E.write(STRINGIFY(o)+"\r\n"),void 0!==n&&t(i,function(E){n(E),e(i)})},function(){n=!0,E.end()})});t.listen(E),console.log("[UPPERCASE.JS-SOCKET_SERVER] RUNNING SOCKET SERVER... (PORT:"+E+")")}}),global.WEB_SERVER=WEB_SERVER=CLASS(function(E){"use strict";var o,n=require("http"),t=require("querystring"),e=require("zlib");return E.getEncodingFromContentType=o=function(E){return"application/javascript"===E?"utf-8":"application/json"===E?"utf-8":"text/css"===E?"utf-8":"text/plain"===E?"binary":"text/html"===E?"utf-8":"image/png"===E?"binary":"image/jpeg"===E?"binary":"image/gif"===E?"binary":"image/svg+xml"===E?"utf-8":"application/x-shockwave-flash"===E?"binary":"audio/mpeg"===E?"binary":"binary"},{init:function(E,i,r,S){var R,a,c,s,_,u,C,d;CHECK_IS_DATA(r)!==!0?R=r:(R=r.port,a=r.securedPort,c=r.securedKeyFilePath,s=r.securedCertFilePath,_=r.noParsingParamsURI),C=function(E,n){var i,r,R=E.headers,a=E.url,c=E.method.toUpperCase(),s=R["X-Forwarded-For"],u=R["accept-encoding"],C=[];void 0===s&&(s=E.connection.remoteAddress),void 0===u&&(u=""),-1!=a.indexOf("?")&&(i=a.substring(a.indexOf("?")+1),a=a.substring(0,a.indexOf("?"))),a=a.substring(1),NEXT([function(o){"GET"===c||_===a||CHECK_IS_IN({array:_,value:a})===!0?o():(E.on("data",function(E){void 0===i&&(i=""),i+=E}),E.on("end",function(){o()}))},function(){return function(){S(r={headers:R,uri:a,method:c,params:t.parse(i),ip:s,cookies:PARSE_COOKIE_STR(R.cookie),nativeReq:E},function(E){var t,i,S,R,a,c,s,_;r.isResponsed!==!0&&(CHECK_IS_DATA(E)!==!0?R=E:(t=E.statusCode,i=E.headers,S=E.contentType,R=E.content,a=E.buffer,c=E.encoding,s=E.version,_=E.isFinal),void 0===t&&(t=200),void 0===i&&(i={}),void 0!==S&&(void 0===c&&(c=o(S)),i["Content-Type"]=S+"; charset="+c),CONFIG.isDevMode!==!0&&(_===!0?i.ETag="FINAL":void 0!==s&&(i.ETag=s)),u.match(/\bgzip\b/)!==TO_DELETE?(i["Content-Encoding"]="gzip",e.gzip(void 0!==a?a:String(R),function(E,o){n.writeHead(t,i),n.end(o,c)})):(n.writeHead(t,i),n.end(void 0!==a?a:String(R),c)),r.isResponsed=!0)},function(E){C.push(E)})}}]),_!==a&&CHECK_IS_IN({array:_,value:a})!==!0&&E.on("close",function(){EACH(C,function(E){E()})})},void 0!==R&&(u=n.createServer(C).listen(R)),void 0!==a&&(u=https.createServer({key:fs.readFileSync(c),cert:fs.readFileSync(s)},C).listen(a)),console.log("[UPPERCASE.JS-WEB_SERVER] RUNNING WEB SERVER..."+(void 0===R?"":" (PORT:"+R+")")+(void 0===a?"":" (SECURED PORT:"+a+")")),i.getNativeHTTPServer=d=function(){return u}}}}),global.PARSE_COOKIE_STR=PARSE_COOKIE_STR=METHOD({run:function(E){"use strict";var o,n={};return void 0!==E&&(o=E.split(";"),EACH(o,function(E){var o=E.split("=");n[o[0].trim()]=decodeURIComponent(o[1])})),n}}),global.CREATE_COOKIE_STR_ARRAY=CREATE_COOKIE_STR_ARRAY=METHOD({run:function(E){"use strict";var o=[];return EACH(E,function(E,n){o.push(n+"="+encodeURIComponent(E))}),o}});